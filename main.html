<!doctype html>
<html lang="en">

<head>
    <title>Main</title>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

    <!-- Bootstrap CSS -->
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css"
        integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
    <style>
        #page td {
            padding: 0;
            margin: 0;
        }

        #page {
            border-collapse: collapse;
        }
    </style>
</head>

<body class="bg-light">

    <!-- Optional JavaScript -->
    <!-- jQuery first, then Popper.js, then Bootstrap JS -->
	<script src="https://code.jquery.com/jquery-3.3.1.slim.min.js"
        integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo"
        crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js"
        integrity="sha384-UO2eT0CpHqdSJQ6hJty5KVphtPhzWj9WO1clHTMGa3JDZwrnQq4sF86dIHNDz0W1"
        crossorigin="anonymous"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js"
        integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM"
        crossorigin="anonymous"></script>
</body>
<header>
    <div class="float-left">
        <script type="text/javascript">
            function newPopup(url) {
                popupWindow = window.open(
                    url, 'popUpWindow', 'height=350,width=400,left=10,top=10,resizable=yes,scrollbars=yes,toolbar=yes,menubar=no,location=no,directories=no,status=yes')
            }
        </script>
        <p>
			<a class="btn btn-dark btn-primary" href="" onclick="openCreatePost()" role="button">Create Post</a>
			<script>
				function openCreatePost() {
					newPopup("post.html");
				}
				
				window.addEventListener("message", function(event) {
					showContent_recent(event.data[0], "e",event.data[1]);
				});
			</script>
        </p>
    </div>
    <div class="float-right">
            <a class="btn btn-dark btn-primary" href="login.html" role="button">Sign in / Go to Profile</a>
        <!--
        <button type="button" name="" id="" class="btn btn-dark" btn-lg btn-block">Sign in / Go to Profile</button>
        -->
    </div>
    
    <div class="text-center mt-5 mb-5">
        <img src="Logo_tamp.png" class="rounded" width="500">
    </div>
    <div class="container">
        <form method="get" action="main.html" class="text-center">
			<script>
				// This is the function to search for posts
				function search_post(val)
				{
					val = val.toLowerCase();
					var outer = document.getElementsByClassName("recent_post")[0];
					var children = outer.children;
					
					for (i = 0; i < children.length; i++) {
						if (children[i].innerText.toLowerCase().includes(val))
						{
							children[i].style.display = "";
							//highlight in title
							var innerText = children[i].children[0].children[0].innerText;
							var index = innerText.indexOf(val);
							if (index >= 0)
							{
								innerText = innerText.substring(0,index) + "<span style=\"background-color: SkyBlue\">" + innerText.substring(index,index+val.length) + "</span>" + innerText.substring(index + val.length);
							}
							else
							{
								innerText = "<span style=\"background-color: azure\">" + innerText.substring(0,index) + innerText.substring(index,index+val.length) + innerText.substring(index + val.length) + "</span>";
							}
							children[i].children[0].children[0].innerHTML = innerText;
							//highlight in author name
							innerText = children[i].children[0].children[1].innerText;
							index = innerText.indexOf(val);
							if (index >= 0)
							{
								innerText = innerText.substring(0,index) + "<span style=\"background-color: SkyBlue\">" + innerText.substring(index,index+val.length) + "</span>" + innerText.substring(index + val.length);
							}
							else
							{
								innerText = "<span style=\"background-color: azure\">" + innerText.substring(0,index) + innerText.substring(index,index+val.length) + innerText.substring(index + val.length) + "</span>";
							}
							children[i].children[0].children[1].innerHTML = innerText;
							//highlight in post body
							innerText = children[i].children[0].children[2].innerText;
							index = innerText.indexOf(val);
							if (index >= 0)
							{
								innerText = innerText.substring(0,index) + "<span style=\"background-color: SkyBlue\">" + innerText.substring(index,index+val.length) + "</span>" + innerText.substring(index + val.length);
							}
							else
							{
								innerText = "<span style=\"background-color: azure\">" + innerText.substring(0,index) + innerText.substring(index,index+val.length) + innerText.substring(index + val.length) + "</span>";
							}
							children[i].children[0].children[2].innerHTML = innerText;
						}
						else 
						{
							children[i].style.display = "none";
						}
					}
				}
			</script>
            <input type="text" placeholder="Search for a post..." class="search-input" name="search" onkeyup="search_post(this.value)">
           
        </form>
    </div>
</header>
<section class="posts">
    <div class="container-fluid">
        <div class="row">
            <div class="sidebar">
                <button class="collapsible">Filter</button>
                    <div class="content">
                    <div>
                        <button class="collapsible">Cleanliness</button>
                        <div class="innercontent">
                            <a>Select level of cleanliness: </a>
                            <select>
                            <option>Very important</option>
                            <option>Preferable</option>
                            <option>Doesn't matter</option>           
                            </select>
                        </div>
                    </div>
                        
                    <div>
                        <button class="collapsible">Quietness</button>
                        <div class="innercontent">
                            <a>Select importance of quietness: </a>
                            <select>
                            <option>Above average</option>
                            <option>Average</option>
                            <option>Below average</option>
                            <option>Doesn't matter</option>            
                            </select>
                        </div>
                    </div>
            
                    <div>
                        <button class="collapsible">Pet friendliness</button>
                        <div class="innercontent">
                            <a>Select preference: </a>
                            <select>
                            <option>Pet Friendly</option>
                            <option>No pets</option>
                            <option>Doesn't matter</option>            
                            </select>
                        </div>
                    </div>
                        
                    <div>
                        <button class="collapsible">Smoking preference</button>
                        <div class="innercontent">
                            <a>Select preference: </a>
                            <select>
                            <option>Smoking is okay</option>
                            <option>No smoking</option>
                            <option>Doesn't matter</option>            
                            </select>
                        </div>
                    </div>
                    </div> 
                </div>
			
			<script>
			function save() {
				alert("saved");
			}
			</script>
			
			<!-- RECENT POSTS -->
			<template id="recent_template">
				<span class="post container border border-primary rounded" style="padding: 5px; background-color: azure; border-width:3px !important; border-style: dashed !important; width:30%; float: left; margin: 10px;">
					<div class="post_content">
						<h6 class="title text-dark text-center" > Female roommate needed</h6>
						<h6 class="author text-dark text-center">Ryan Tran</h6>
						<p class="story text-dark">This is where the description of the post would go. </p>
					</div>
					<!--div class="timestamp text-dark"> Posted at 7:41pm August 24, 2018 </div-->
					<a name="" id="" class="btn" href="#" role="button" style="background-color: darkkhaki;" onclick="save()">Save</a>
					<a name="" id="" class="btn float-right" href="JavaScript:newPopup('contact.html');" role="button" style="background-color: wheat;">Contact</a>
				</span>
			</template>
			
			<script>
			function showContent_recent(title, author, content) {
			  var temp = document.getElementById("recent_template");
			  var clone = document.importNode(temp.content, true);
			  clone.querySelector(".title").textContent = title;
			  clone.querySelector(".author").textContent = author;
			  clone.querySelector(".story").textContent = content;
			  document.body.getElementsByClassName("recent_post")[0].insertBefore(clone, document.body.getElementsByClassName("recent_post")[0].firstChild);
			}
			</script>
			
			<div class="recent_post" style="margin-left: 20%; width: 80%;">
			</div>
			<script>
				//sample posts
				showContent_recent("t1","a","bdsf");
				showContent_recent("t2","b","asdfa");
				showContent_recent("t3","c","asdf");
				showContent_recent("t4","d","adf");
			</script>
			
			
        </div>
    </div>
</section>
</body>

</html>

<style>
.sidebar {
  background-color: #00ff00;
  width: 200px;
  position: fixed;
  z-index: 1;
  margin-top: 10px;
  left: 10px;
}

.collapsible {
  background-color: #eee;
  color: #444;
  cursor: pointer;
  padding: 18px;
  width: 100%;
  border: none;
  text-align: left;
  outline: none;
  font-size: 15px;
}

/* Add a background color to the button if it is clicked on (add the .active class with JS), and when you move the mouse over it (hover) */
.active, .collapsible:hover {
  background-color: #ccc;
}

/* Style the collapsible content. Note: hidden by default */
.content {
  padding: 0 18px;
  display: block;
  background-color: #eee;
  overflow: hidden;
  font-size: 15px;
}

.innercontent {
  padding: 0 18px;
  display: none;
  background-color: #eee;
  overflow: hidden;
  font-size: 15px;

}


.slidecontainer {
  width: 45%; /* Width of the outside container */
}

</style>


<script>
    var coll = document.getElementsByClassName("collapsible");
    var i;

    for (i = 0; i < coll.length; i++) {
    coll[i].addEventListener("click", function() {
        this.classList.toggle("active");
        var content = this.nextElementSibling;
        if (content.style.display === "block") {
        content.style.display = "none";
        } else {
        content.style.display = "block";
        }
    });
    } 

    var slider = document.getElementById("myRange");
    var output = document.getElementById("demo");
    output.innerHTML = slider.value; // Display the default slider value
    output.style.left = "100px"; 

    // Update the current slider value (each time you drag the slider handle)
    slider.oninput = function() {
    output.innerHTML = this.value;
    } 
</script>
